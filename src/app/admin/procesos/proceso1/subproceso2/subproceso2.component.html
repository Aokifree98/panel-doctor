<div class="row">
  <div class="col-12 p-1">
    <div class="card">
      <div class="card-header card-header-primary">
        <h4 class="card-title text-center">
          Paciente
        </h4>
      </div>
      <div class="card-body p-4">
        <div class="row">
          <div class="col-12 p-1">
            <div class="row p-4">
              <div class="col-12 col-md-4 col-lg-3 p-1">
                <img [src]="ticket.cliente.Photo" alt="foto paciente">
              </div>
              <div class="col-12 col-md-8 col-lg-9 p-1">
                <div class="row">
                  <div class="col-12 p-1">
                    <h4 class="text-center">
                      <span>
                        Nombres y Apellidos:
                      </span>
                      {{ticket.cliente.Name + ' ' + ticket.cliente.LastName}}
                    </h4>
                  </div>
                  <div class="col-12 p-1">
                    <div class="row">
                      <div class="col-12 col-md-6 col-lg-4 p-1">
                        <span>
                          DNI:
                        </span>
                        {{ticket.cliente.DocumentNumber}}
                      </div>
                      <div class="col-12 col-md-6 col-lg-4 p-1">
                        <span>
                          Correo:
                        </span>
                        {{ticket.cliente.Email}}
                      </div>
                      <div class="col-12 col-md-6 col-lg-4 p-1">
                        <span>
                          Celular:
                        </span>
                        {{ticket.cliente.Phone}}
                      </div>
                      <div class="col-12 col-md-6 col-lg-4 p-1">
                        <span>
                          Genero:
                        </span>
                        {{ticket.cliente.Gender}}
                      </div>
                      <div class="col-12 col-md-6 col-lg-4 p-1">
                        <span>
                          Estado Civil:
                        </span>
                        {{ticket.cliente.CivilStatus}}
                      </div>
                      <div class="col-12 col-md-6 col-lg-4 p-1">
                        <span>
                          Dedicacion:
                        </span>
                        {{ticket.cliente.Job}}
                      </div>
                      <div class="col-12 col-md-6 col-lg-4 p-1">
                        <span>
                          Edad:
                        </span>
                        {{edad}}
                      </div>
                      <div class="col-12 col-md-6 col-lg-8 p-1">
                        <span>
                          Direccion:
                        </span>
                        {{ticket.cliente.Direction}}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-12 p-1">
    <div class="card">
      <div class="card-header card-header-primary">
        <h4 class="card-title text-center">
          Historial de Hoy
        </h4>
      </div>
      <div class="card-body">
        <div class="row justify-content-center text-center">
          <div class="col-12 col-lg-4 p-1">
            <span>
              Referido por:
            </span>
            {{ticket.Referred}}
          </div>
          <div class="col-12 col-lg-4 p-1">
            <span>
              Acompaniante:
            </span>
            {{ticket.Companion}}
          </div>
          <div class="col-12 col-lg-4 p-1">
            <span>
              Parentesco:
            </span>
            {{ticket.Relationship}}
          </div>
        </div>
        <hr>
        <div class="row justify-content-center text-center">
          <div class="col-4 col-md-3 col-lg-2">
            <span>
              PA:
            </span>
            {{ticket.BloodPressure}}
          </div>
          <div class="col-4 col-md-3 col-lg-2">
            <span>
              FC:
            </span>
            {{ticket.HeartRate}}
          </div>
          <div class="col-4 col-md-3 col-lg-2">
            <span>
              FR:
            </span>
            {{ticket.BreathingFrequency}}
          </div>
          <div class="col-4 col-md-3 col-lg-2">
            <span>
              T:
            </span>
            {{ticket.Temperature}}
          </div>
          <div class="col-4 col-md-3 col-lg-2">
            <span>
              SO2:
            </span>
            {{ticket.Saturation}}
          </div>
        </div>
        <hr>
        <div class="row">
          <div class="col-12 p-1">
            <form>
              <h2 class="text-center">
                EPISODIO ACTUAL
              </h2>
              <div class="row justify-content-center">
                <div class="col-12 col-md-6 col-lg-4 p-2 borde">
                  <div class="form-group">
                    <label>
                      TE:
                    </label>
                    <input
                      name="reserva.SickTime"
                      [(ngModel)]="reserva.SickTime"
                      type="text"
                      class="form-control"
                      required minlength="3"
                      autofocus tabindex="1"
                      placeholder=".........">
                  </div>
                </div>
                <div class="col-12 col-md-6 col-lg-4 p-2 borde">
                  <div class="form-group">
                    <label>
                      EA:
                    </label>
                    <input
                      name="reserva.CurrentEpisode"
                      [(ngModel)]="reserva.CurrentEpisode"
                      type="text"
                      class="form-control"
                      required minlength="3"
                      tabindex="2"
                      placeholder=".........">
                  </div>
                </div>
                <div class="col-12 col-md-6 col-lg-4 p-2 borde">
                  <div class="form-group">
                    <label>
                      FI:
                    </label>
                    <input
                      name="reserva.StartWay"
                      [(ngModel)]="reserva.StartWay"
                      type="text"
                      class="form-control"
                      required minlength="3"
                      tabindex="3"
                      placeholder=".........">
                  </div>
                </div>
              </div>
              <hr>
              <div class="row justify-content-center">
                <div class="col-12 p-2 borde">
                  <div class="form-group">
                    <label>
                      SS:
                    </label>
                    <textarea
                      name="reserva.SignsandSymptoms"
                      [(ngModel)]="reserva.SignsandSymptoms"
                      type="text"
                      class="form-control"
                      required minlength="3"
                      tabindex="4"
                      placeholder="........."
                      cols="30" rows="10"></textarea>
                  </div>
                </div>
              </div>
              <hr>
              <div class="row justify-content-center">
                <div class="col-12 p-2 borde">
                  <div class="form-group">
                    <label>
                      DESCRIPCIÓN DEL PROBLEMA:
                    </label>
                    <textarea
                      name="reserva.DescriptionProblem"
                      [(ngModel)]="reserva.DescriptionProblem"
                      type="text"
                      class="form-control"
                      required minlength="3"
                      tabindex="5"
                      placeholder="........."
                      cols="30" rows="10"></textarea>
                  </div>
                </div>
              </div>
              <hr>
              <h2 class="text-center">
                ANTECEDENTES PRINCIPALES
              </h2>
              <div class="row justify-content-center">
                <div class="col-12 col-md-6 col-lg-4 p-2 borde">
                  <div class="form-group">
                    <label>
                      QX:
                    </label>
                    <input
                      name="reserva.SurgicalHistory"
                      [(ngModel)]="reserva.SurgicalHistory"
                      type="text"
                      class="form-control"
                      required minlength="3"
                      tabindex="6"
                      placeholder=".........">
                  </div>
                </div>
                <div class="col-12 col-md-6 col-lg-4 p-2 borde">
                  <div class="form-group">
                    <label>
                      MEDICOS:
                    </label>
                    <input
                      name="reserva.MedicalHistory"
                      [(ngModel)]="reserva.MedicalHistory"
                      type="text"
                      class="form-control"
                      required minlength="3"
                      tabindex="7"
                      placeholder=".........">
                  </div>
                </div>
                <div class="col-12 col-md-6 col-lg-4 p-2 borde">
                  <div class="form-group">
                    <label>
                      ALERGIAS:
                    </label>
                    <input
                      name="reserva.AllergicHistory"
                      [(ngModel)]="reserva.AllergicHistory"
                      type="text"
                      class="form-control"
                      required minlength="3"
                      tabindex="8"
                      placeholder=".........">
                  </div>
                </div>
              </div>
              <hr>
              <div class="row justify-content-center">
                <div class="col-12 p-2 borde">
                  <div class="form-group">
                    <label>
                      EXAMEN FÍSICO:
                    </label>
                    <textarea
                      name="reserva.PhysicalExam"
                      [(ngModel)]="reserva.PhysicalExam"
                      type="text"
                      class="form-control"
                      required minlength="3"
                      tabindex="9"
                      placeholder="........."
                      cols="30" rows="10"></textarea>
                  </div>
                </div>
              </div>
              <div class="row justify-content-center">
                <div class="col-12 p-2 borde">
                  <div class="form-group">
                    <label>
                      DIAGNOSTICO:
                    </label>
                    <textarea
                      name="reserva.Diagnosis"
                      [(ngModel)]="reserva.Diagnosis"
                      type="text"
                      class="form-control"
                      required minlength="3"
                      tabindex="10"
                      placeholder="........."
                      cols="30" rows="10"></textarea>
                  </div>
                </div>
              </div>
              <div class="row justify-content-center">
                <div class="col-12 p-2 borde">
                  <div class="form-group">
                    <label>
                      EXAMENES DE LABORATORIO:
                    </label>
                    <div class="row">
                      <div class="col-12 col-lg-6 p-2">
                        <button type="submit" class="btn btn-primary" data-toggle="modal" data-target="#ModalAnalisis">
                          Analisis
                        </button>
                      </div>
                      <div class="col-12 col-lg-6 p-2">
                        <button type="submit" class="btn btn-primary" data-toggle="modal" data-target="#ModalLaboratorio">
                          Rx - Tm - RM
                        </button>
                      </div>
                    </div>
                    <!-- <textarea
                      name="reserva.LaboratoryExam"
                      [(ngModel)]="reserva.LaboratoryExam"
                      type="text"
                      class="form-control"
                      required minlength="3"
                      tabindex="11"
                      placeholder="........."
                      cols="30" rows="10"></textarea> -->
                  </div>
                </div>
              </div>
              <button type="submit" class="btn btn-primary" (click)="historial()">
                Registrar
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<!-- Modal Analisis -->
<div class="modal fade" id="ModalAnalisis" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title font-weight-normal" id="exampleModalLabel">
          Analisis
        </h5>
        <button type="button" class="btn-close text-dark" data-bs-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-12 col-lg-4 p-2">
            <h2>
              Tipos:
            </h2>
            <div class="row">
              <div class="col-12 col-lg-6 p-1" *ngFor="let obj of tipos1">
                <button type="submit" class="btn btn-primary" (click)="selecttype1(obj.id)">
                  {{obj.Name}}
                </button>
              </div>
            </div>
          </div>
          <div class="col-12 col-lg-4 p-2">
            <h3>
              Examenes de laboratorio:
            </h3>
            <div class="col-12col-lg-6 col-xl-4 p-2" *ngFor="let item of analisisfiltrado">
              <label class="form-check-label bmd-label-static">
                <input class="form-check-input" type="checkbox" value="true" (change)="onchangeselect1(item.id)">
                {{item.labratorio.Name}}
                <span class="form-check-sign">
                  <span class="check"></span>
                </span>
              </label>
            </div>
          </div>
          <div class="col-12 col-lg-4 p-2">
            <h3>
              Seleccionados:
            </h3>
            <div class="row">
              <div class="col-12 p-1" *ngFor="let item of analisisseleccioanados">
                <p>
                  {{item.labratorio.Name}}
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn bg-gradient-secondary" data-bs-dismiss="modal">
          Cerrar
        </button>
        <button type="button" class="btn bg-gradient-primary" data-bs-dismiss="modal">
          Guardar
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Modal Laboratorio -->
<div class="modal fade" id="ModalLaboratorio" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title font-weight-normal" id="exampleModalLabel">
          Rayos X - Tomografia - Resonancia Magnetica
        </h5>
        <button type="button" class="btn-close text-dark" data-bs-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-12 col-lg-3 p-1">
            <h2>
              Tipos:
            </h2>
            <div class="row">
              <div class="col-12 col-lg-6 p-1" *ngFor="let obj of tipos2">
                <button type="submit" class="btn btn-primary" (click)="selecttype2(obj.id, obj.Name)">
                  {{obj.Name}}
                </button>
              </div>
            </div>
          </div>
          <div class="col-12 col-lg-3 p-1">
            <h3>
              {{name}}:
            </h3>
            <div class="col-12col-lg-6 col-xl-4 p-2" *ngFor="let item of rxtmrmfiltrado">
              <label class="form-check-label bmd-label-static">
                <input class="form-check-input" type="checkbox" value="true" (change)="onchangeselect2(item.id)">
                {{item.laboratoriodos.Name}}
                <span class="form-check-sign">
                  <span class="check"></span>
                </span>
              </label>
            </div>
          </div>
          <div class="col-12 col-lg-3 p-1">
            <div *ngIf="mostrar">
              <form>
                <div class="row">
                  <div class="col-12 p-1">
                    <div class="form-group">
                      <label class="bmd-label-floating">
                        Lugar
                      </label>
                      <br>
                      <select (change)='onOptionsSelected($event)'
                        id="select-type-basic"
                        class="form-control"
                        [(ngModel)]="ellaboratorio.Location"
                        name="ellaboratorio.Location"
                        required>
                        <option selected value="">
                          Seleccione Lugar
                        </option>
                        <option [value]="obj.name" *ngFor="let obj of genero">
                        {{obj.name}}
                        </option>
                      </select>
                    </div>
                  </div>
                  <div class="col-12 p-1">
                    <div class="form-group">
                      <label class="bmd-label-floating">
                        Cantidad
                      </label>
                      <input name="ellaboratorio.Amount"
                      [(ngModel)]="ellaboratorio.Amount"
                      onKeypress="if (event.keyCode < 45 || event.keyCode > 57) event.returnValue = false;"
                      required minlength="8"
                      placeholder="........."
                      type="text" class="form-control">
                    </div>
                  </div>
                  <div class="col-12 p-1">
                    <button (click)="updaterxtmrm(ellaboratorio.id)" type="submit" class="btn btn-primary pull-right"
                      [disabled]="(ellaboratorio.Location === '' &&  ellaboratorio.Amount === '')? true:false">
                      Actualizar
                    </button>
                  </div>
                </div>
              </form>
            </div>
          </div>
          <div class="col-12 col-lg-3 p-1">
            <h3>
              Seleccionados:
            </h3>
            <div class="row">
              <div class="col-12 p-1" *ngFor="let item of rxtmrmseleccioanados">
                <p>
                  {{item.laboratoriodos.Name}}
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn bg-gradient-secondary" data-bs-dismiss="modal">
          Cerrar
        </button>
        <button type="button" class="btn bg-gradient-primary" data-bs-dismiss="modal">
          Guardar
        </button>
      </div>
    </div>
  </div>
</div>
